/* Fix pour le widget Kite Discount (Free Gift) dans le cart drawer */

.wt-drawer.GBP mega-menu-section li.wt-page-nav-mega__item:last-child {
  display: block !important;
}

/* Conteneur principal des options */
.wt-cart__drawer .gfgFreeGiftOptionsContainerDiv,
.cart-drawer .gfgFreeGiftOptionsContainerDiv {
  width: 100% !important;
  min-width: 100% !important;
  padding: 10px 8px !important;
  gap: 12px !important;
}

/* Ligne d'option produit */
.wt-cart__drawer .gfgFreeGiftMsgOptionRow,
.cart-drawer .gfgFreeGiftMsgOptionRow {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  width: 100% !important;
  gap: 10px !important;
}

/* Icône/Image du produit */
.wt-cart__drawer .gfgFreeGiftMsgIcon,
.cart-drawer .gfgFreeGiftMsgIcon {
  width: 50px !important;
  min-width: 50px !important;
  height: 50px !important;
}

.wt-cart__drawer .gfgFreeGiftMsgIcon img,
.cart-drawer .gfgFreeGiftMsgIcon img {
  width: 50px !important;
  height: 50px !important;
  object-fit: cover !important;
  border-radius: 6px !important;
}

/* Conteneur du texte */
.wt-cart__drawer .gfgFreeGiftMsgTextContainer,
.cart-drawer .gfgFreeGiftMsgTextContainer {
  flex: 1 !important;
  font-size: 13px !important;
  line-height: 1.4 !important;
}

/* ========================================
   BOUTON "Sélectionner" - Classes exactes
   ======================================== */
.wt-cart__drawer .gfgFreeGiftClaimButton,
.wt-cart__drawer .gfgFreeGiftClaimButtonAddToCart,
.wt-cart__drawer [class*="gfgFreeGiftClaimButton"],
.wt-cart__drawer [class*="ReadyToClaimButton"],
.cart-drawer .gfgFreeGiftClaimButton,
.cart-drawer .gfgFreeGiftClaimButtonAddToCart,
.cart-drawer [class*="gfgFreeGiftClaimButton"],
.cart-drawer [class*="ReadyToClaimButton"],
#CartDrawer .gfgFreeGiftClaimButton,
#CartDrawer [class*="gfgFreeGiftClaimButton"],
#CartDrawer [class*="ReadyToClaimButton"] {
  min-width: fit-content !important;
  width: auto !important;
  white-space: nowrap !important;
  padding: 6px 10px !important;
  font-size: 11px !important;
  font-weight: 500 !important;
  border-radius: 6px !important;
  text-transform: none !important;
  letter-spacing: 0 !important;
  line-height: 1.3 !important;
}

/* Conteneur accordion */
.wt-cart__drawer .gfgFreeGiftMsgContainerForAccordion,
.wt-cart__drawer .gfgFreeGiftMsgContainerForAccordion-Expanded,
.cart-drawer .gfgFreeGiftMsgContainerForAccordion,
.cart-drawer .gfgFreeGiftMsgContainerForAccordion-Expanded {
  width: 100% !important;
  min-width: 100% !important;
  border-radius: 10px !important;
}

/* Message en bas "Vous avez débloqué..." */
.wt-cart__drawer [class*="gfgConsolidatedProgressBarWrapper"],
.cart-drawer [class*="gfgConsolidatedProgressBarWrapper"] {
  font-size: 12px !important;
  padding: 8px !important;
}

/* ========================================
   Fix pour le widget Kite sur la PAGE PRODUIT (PDP)
   ======================================== */

/* IMPORTANT: Repositionner le module Kite AU-DESSUS du sélecteur de quantité */
/* Modifier le conteneur parent pour permettre le repositionnement */
.wt-product__add-to-cart_form--wrapper {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 12px !important;
}

/* Conteneur principal sur la page produit - POSITIONNER EN PREMIER */
.wt-product__add-to-cart_form--wrapper .gfgPageWrapper.gfgProductPageWrapperV2,
.product-form .gfgPageWrapper.gfgProductPageWrapperV2,
.gfgPageWrapper.gfgProductPageWrapperV2 {
  width: 100% !important;
  max-width: 100% !important;
  flex-basis: 100% !important;
  order: -1 !important;
  margin-top: 0 !important;
  margin-bottom: 8px !important;
  box-sizing: border-box !important;
}

/* S'assurer que le compteur et le bouton restent sur la même ligne */
.wt-product__add-to-cart_form--wrapper .counter {
  order: 1 !important;
}

.wt-product__add-to-cart_form--wrapper .js-add-to-cart,
.wt-product__add-to-cart_form--wrapper .product-form__submit {
  order: 2 !important;
  flex: 1 !important;
}

/* Wrapper des cadeaux */
.gfgProductPageWrapperV2 .gftFreeGiftWrapper {
  width: 100% !important;
  max-width: 100% !important;
}

/* Conteneur parent du dropdown */
.gfgProductPageWrapperV2 .gfgFreeGiftMsgParentContainerForDropDown {
  width: 100% !important;
  max-width: 100% !important;
  position: relative !important;
}

/* Sélecteur dropdown principal "Cadeaux offerts avec votre commande" */
.gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  width: 100% !important;
  gap: 12px !important;
  padding: 12px !important;
  background-color: #f8f8f8 !important;
  border-radius: 10px !important;
  cursor: pointer !important;
  box-sizing: border-box !important;
}

/* Icône dans le sélecteur dropdown */
.gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv .gfgFreeGiftMsgIcon {
  width: 50px !important;
  min-width: 50px !important;
  height: 50px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv .gfgFreeGiftMsgIcon img {
  width: 40px !important;
  height: 40px !important;
  object-fit: contain !important;
}

/* Conteneur texte dans le sélecteur */
.gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv .gfgFreeGiftMsgTextContainer {
  flex: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  height: auto !important;
  overflow: hidden !important;
}

/* Titre dans le sélecteur */
.gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv .gfgFreeGiftMsgTitle {
  font-size: 14px !important;
  font-weight: 600 !important;
  color: #000 !important;
  line-height: 1.4 !important;
  height: auto !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

/* Bouton dropdown (flèche) */
.gfgProductPageWrapperV2 .gfgFreeGiftDropDownButton {
  width: 32px !important;
  height: 32px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-shrink: 0 !important;
}

.gfgProductPageWrapperV2 .gfgFreeGiftDropDownButton img {
  width: 24px !important;
  height: 24px !important;
}

/* Accordéon des options (menu déroulant) */
.gfgProductPageWrapperV2 .gfgFreeGiftMsgContainerForAccordion {
  width: 100% !important;
  max-width: 100% !important;
  position: absolute !important;
  top: 100% !important;
  left: 0 !important;
  z-index: 100 !important;
  background-color: #fff !important;
  border: 1px solid #e0e0e0 !important;
  border-radius: 10px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
  margin-top: 4px !important;
  box-sizing: border-box !important;
}

.gfgProductPageWrapperV2 .gfgFreeGiftMsgContainerForAccordion-Expanded {
  display: block !important;
}

/* Conteneur des options produits */
.gfgProductPageWrapperV2 .gfgFreeGiftOptionsContainerDiv {
  display: flex !important;
  flex-direction: column !important;
  width: 100% !important;
  max-width: 100% !important;
  padding: 12px !important;
  gap: 12px !important;
  max-height: 350px !important;
  overflow-y: auto !important;
  box-sizing: border-box !important;
}

/* Ligne d'option produit */
.gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  width: 100% !important;
  gap: 12px !important;
  padding: 8px !important;
  background-color: #fafafa !important;
  border-radius: 8px !important;
  box-sizing: border-box !important;
}

.gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow:hover {
  background-color: #f0f0f0 !important;
}

/* Icône/Image du produit dans les options */
.gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgIcon {
  width: 60px !important;
  min-width: 60px !important;
  height: 60px !important;
  flex-shrink: 0 !important;
}

.gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgIcon img {
  width: 60px !important;
  height: 60px !important;
  object-fit: cover !important;
  border-radius: 6px !important;
}

/* Conteneur du texte dans les options */
.gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgTextContainer {
  flex: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 4px !important;
  min-width: 0 !important;
  height: auto !important;
}

/* Titre du produit */
.gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgTitle {
  font-size: 14px !important;
  font-weight: 600 !important;
  color: #000 !important;
  line-height: 1.3 !important;
  height: auto !important;
}

/* Sous-titre (montant restant) */
.gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgSubTitle {
  font-size: 12px !important;
  color: #666 !important;
  line-height: 1.3 !important;
  height: auto !important;
}

/* Bouton "Sélectionner" sur la page produit */
.gfgProductPageWrapperV2 .gfgFreeGiftClaimButton,
.gfgProductPageWrapperV2 [class*="gfgFreeGiftClaimButton"] {
  min-width: fit-content !important;
  width: auto !important;
  white-space: nowrap !important;
  padding: 8px 16px !important;
  font-size: 12px !important;
  font-weight: 600 !important;
  border-radius: 20px !important;
  text-transform: none !important;
  letter-spacing: 0 !important;
  line-height: 1.3 !important;
  background-color: #000 !important;
  color: #fff !important;
  border: none !important;
  cursor: pointer !important;
  flex-shrink: 0 !important;
  transition: background-color 0.2s ease !important;
}

.gfgProductPageWrapperV2 .gfgFreeGiftClaimButton:hover,
.gfgProductPageWrapperV2 [class*="gfgFreeGiftClaimButton"]:hover {
  background-color: #333 !important;
}

/* Bouton désactivé (montant non atteint) */
.gfgProductPageWrapperV2 .gfgFreeGiftInvalidProductClaimButton {
  background-color: #ccc !important;
  color: #666 !important;
  cursor: not-allowed !important;
}

.gfgProductPageWrapperV2 .gfgFreeGiftInvalidProductClaimButton:hover {
  background-color: #ccc !important;
}

/* Barre de progression */
.gfgProductPageWrapperV2 .gfgConsolidatedProgressBarWrapper {
  width: 100% !important;
  margin-bottom: 8px !important;
}

/* ========================================
   Responsive - Page Produit Mobile
   ======================================== */
@media screen and (max-width: 768px) {
  /* Fix overflow horizontal sur mobile - sélecteurs ultra-spécifiques */
  .wt-product__add-to-cart_form--wrapper .gfgPageWrapper.gfgProductPageWrapperV2.gfgUnifiedDiscountWrapper,
  .wt-product__add-to-cart_form--wrapper .gfgPageWrapper.gfgProductPageWrapperV2,
  div.gfgPageWrapper.gfgProductPageWrapperV2 {
    width: 100% !important;
    max-width: 100% !important;
    overflow: visible !important;
    box-sizing: border-box !important;
  }

  /* Wrapper des cadeaux - FORCER la hauteur auto */
  div.gfgProductPageWrapperV2 div.gftFreeGiftWrapper,
  .gfgProductPageWrapperV2 .gftFreeGiftWrapper {
    width: 100% !important;
    max-width: 100% !important;
    overflow: visible !important;
    height: auto !important;
    min-height: auto !important;
    gap: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    display: flex !important;
    flex-direction: column !important;
  }

  /* Conteneur parent du dropdown - FLEX COLUMN */
  div.gfgProductPageWrapperV2 div.gfgFreeGiftMsgParentContainerForDropDown,
  .gfgProductPageWrapperV2 .gfgFreeGiftMsgParentContainerForDropDown {
    width: 100% !important;
    max-width: 100% !important;
    position: relative !important;
    display: flex !important;
    flex-direction: column-reverse !important;
    gap: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Le bouton CTA "Cadeaux offerts" */
  div.gfgProductPageWrapperV2 div.gfgFreeGiftSelectDiv,
  .gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv {
    padding: 10px 12px !important;
    gap: 10px !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    border-radius: 10px !important;
    margin: 0 !important;
    order: 2 !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv .gfgFreeGiftMsgIcon {
    width: 40px !important;
    min-width: 40px !important;
    height: 40px !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv .gfgFreeGiftMsgIcon img {
    width: 32px !important;
    height: 32px !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftSelectDiv .gfgFreeGiftMsgTitle {
    font-size: 13px !important;
    white-space: normal !important;
  }

  /* Menu déroulant - POSITION STATIQUE et ORDER pour être après le CTA */
  div.gfgProductPageWrapperV2 div.gfgFreeGiftMsgContainerForAccordion,
  div.gfgProductPageWrapperV2 div[class*="gfgFreeGiftMsgContainerForAccordion"],
  .gfgProductPageWrapperV2 .gfgFreeGiftMsgContainerForAccordion,
  .gfgProductPageWrapperV2 [class*="gfgFreeGiftMsgContainerForAccordion"] {
    position: static !important;
    position: relative !important;
    top: auto !important;
    left: auto !important;
    right: auto !important;
    bottom: auto !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    margin-top: 0 !important;
    box-shadow: none !important;
    border: 1px solid #e0e0e0 !important;
    border-top: none !important;
    border-radius: 0 0 10px 10px !important;
    box-sizing: border-box !important;
    order: 1 !important;
    transform: none !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftOptionsContainerDiv {
    padding: 10px !important;
    gap: 10px !important;
    max-height: 280px !important;
    overflow-y: auto !important;
    width: 100% !important;
    box-sizing: border-box !important;
    -webkit-overflow-scrolling: touch !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow {
    padding: 10px !important;
    gap: 8px !important;
    flex-wrap: wrap !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgIcon {
    width: 50px !important;
    min-width: 50px !important;
    height: 50px !important;
    flex-shrink: 0 !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgIcon img {
    width: 50px !important;
    height: 50px !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgTextContainer {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgTitle {
    font-size: 13px !important;
    word-wrap: break-word !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftMsgOptionRow .gfgFreeGiftMsgSubTitle {
    font-size: 11px !important;
    word-wrap: break-word !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftClaimButton,
  .gfgProductPageWrapperV2 [class*="gfgFreeGiftClaimButton"] {
    padding: 8px 14px !important;
    font-size: 11px !important;
    flex-shrink: 0 !important;
  }

  /* Bouton dropdown */
  .gfgProductPageWrapperV2 .gfgFreeGiftDropDownButton {
    width: 28px !important;
    height: 28px !important;
    flex-shrink: 0 !important;
  }

  .gfgProductPageWrapperV2 .gfgFreeGiftDropDownButton img {
    width: 20px !important;
    height: 20px !important;
  }
}

/* ========================================
   FIX: KITE UI OVERLAP ON DESKTOP
   Prevent accordion from floating over content
   ======================================== */
@media screen and (min-width: 769px) { 
  .gfgProductPageWrapperV2 .gfgFreeGiftMsgContainerForAccordion,
  .gfgProductPageWrapperV2 .gfgFreeGiftMsgContainerForAccordion-Expanded,
  .wt-cart__drawer .gfgFreeGiftMsgContainerForAccordion {
      position: static !important;
      transform: none !important;
      margin-top: 10px !important;
      box-shadow: none !important;
      border: 1px solid #e0e0e0 !important;
  }
}

/* Judge.me review stars – use theme icomoon font so stars show (not squares) */
.jdgm-star,
.jdgm-rev__stars .jdgm-star {
  font-family: 'icomoon' !important;
  font-style: normal !important;
}
.jdgm-star::before {
  content: "\e9d7";
}
.jdgm-star.jdgm-star--on::before,
.jdgm-star.jdgm--on::before {
  content: "\e9d9" !important;
}
